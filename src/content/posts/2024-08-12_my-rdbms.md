---
slug: 'my-rdbms'
title: 'Goで自作RDBMSに挑戦してみた'
summary: 'Goでの自作RDBMS実装に挑戦してみたログです。'
categories: [ 'tech' ]
tags: [ 'golang' ]
publishedAt: 2024-06-10T23:45:00.000+09:00
modifiedAt:
draft: false
isHtml: false
---

## はじめに

Goでの自作RDBMS実装に挑戦してみたログです。自作、といっても大部分は参考にした文献の移植に近いです。

モチベーションとして、ここ1年くらいRDBに向き合う機会が多く、その内部実装を手を動かしながら身を持って理解してみたいという思いが強くなったからです。ちょうど会社での『内部構造から学ぶPostgreSQL』の読書会に参加したこともモチベーション上げるきっかけとなりました。

普段何気なく使ってるRDBMSですが、ACID特性を守るため・大量の読み書きを捌くために叡智が結集されております。これを完全再現といかなくとも自分の手で実装できると、より解像度高く業務でも利用、はたまた複雑な実装に対する手立てが増やせると思い実装に取り組みはじめました。

本記事では成果物について紹介し、その進め方やTips・所感などまとめられたらと思います。

## 成果物

リポジトリはこちら。バグがもろもろあり実用用途からは遠いがとりあえずは動く。

[abekoh/simple-db: Implementation of the SimpleDB database system in Go.](https://github.com/abekoh/simple-db)

機能は以下の通り。基本は"Database Design and Implementation"の実装そのまま移植だが、一部機能を自力で追加した。*をつけたものが追加したもの。

- SELECT
  - WHERE 演算子は`=`のみ
  - JOIN (INNER JOINのみ)
  - ORDER BY
  - GROUP BY
    - 集計関数はCOUNT, MAX, MIN, SUM
    - *GROUP BYはプランナに使われてなかったので、使えるようにした
- INSERT
- UPDATE
  - WHERE 演算子は`=`のみ
- DELETE
  - WHERE 演算子は`=`のみ
- CREATE TABLE
- CREATE VIEW
- CREATE INDEX
  - B-Treeインデックス
- メタデータテーブル
  - `table_catalog`, `field_catalog`, `view_catalog`, `index_catalog`
- トランザクション
  - COMMIT, ROLLBACK
  - 分離レベルはREAD UNCOMMITTED、Dirty Readあり
- *Prepared Statement
- *PostgreSQL プロトコル
  - 各種PostgreSQLライブラリ、`psql`コマンドを使えるようにし
- *EXPLAIN

CREATE TABLE→CRUDが一通り動きます。

実行計画も確認可能、INDEXありなしで変化する様子。

ソート、集計も少しだが実装しました。


## 参考図書: "Database Design and Implementation"

## 進め方

## Tips

## 所感

## おわりに

## 参考

- [Database Design and Implementation を Go で実装した - goropikariの備忘録](https://goropikari.hatenablog.com/entry/simpledb_sciore)
  - 同じ題材を、同じくGoで実装した例
