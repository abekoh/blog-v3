---
import { getCollection, CollectionEntry } from "astro:content";
import BaseLayout from "@/layouts/BaseLayout.astro";
import { Page } from "astro";
import PostList from "@/components/PostList.astro";
import { postsDefaultSortFunc } from "../../../content/utils";

export async function getStaticPaths({ paginate }) {
  const allPosts = await getCollection("posts");
  return paginate(allPosts.sort(postsDefaultSortFunc), { pageSize: 5 });
}

interface Props {
  page: Page<CollectionEntry<"posts">>;
}

const { page } = Astro.props;
---

<BaseLayout title="page">
  <h1>Page {page.currentPage}</h1>
  <PostList postPage={page} />
</BaseLayout>
