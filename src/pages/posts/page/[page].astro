---
import { getCollection, CollectionEntry } from "astro:content";
import BaseLayout from "src/layouts/BaseLayout.astro";
import { Page } from "astro";
export async function getStaticPaths({ paginate }) {
  const allPosts = await getCollection("posts");
  return paginate(
    allPosts.sort((a, b) => b.data.publishedAt - a.data.publishedAt),
    { pageSize: 5 }
  );
}

interface Props {
  page: Page<CollectionEntry<"posts">>;
}

const { page } = Astro.props;
---

<BaseLayout title="page">
  <h1>Page {page.currentPage}</h1>
  <ul>
    {page.data.map((post) => <li>{post.data.title}</li>)}
  </ul>
</BaseLayout>
